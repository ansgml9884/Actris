<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="ranking.css">
    <title>Ranking</title>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>  
  </head>
  <body>
    <div class="jb-box">
      <video muted autoplay loop>
        <source src="videos/ranking2 - 5134.mp4" type="video/mp4">
      </video>
    </div>
    <div class="category">
      <!--뒤로가기 버튼-->
      <div>
        <img class="backbtn" src="images/back.png" onclick="location.href='index.html'">
      </div>
      <!--랭킹 제목-->
      <p>RANKING</p><br>
      <div class="box">
  
        <!--테이블 테스트데이터 -->
        <div>
          <table id="rankingList" class="tg" width="100%" cellspacing="32" cellpadding="0">
            <thead>
              <th>STAND</th>
              <th>NAME</th>
              <th>COMENT</th>
              <th>REPLAY</th>
              <th>SCORE</th>
              <th>TIME</th>
            </thead>
              <tbody>
                  <tr v-for="ranking in rankings" v-bind:key="ranking.id">
                  <td>1</td>
                  <td>{{ranking.name}}</td>
                  <td>{{ranking.note}}</td>
                  <td>{{ranking.replay_id}}</td>
                  <td>{{ranking.score}}</td>
                  <td>{{ranking.played_date}}</td>
                  </tr>
              </tbody>
          </table>
          <!--앞뒤로 넘기기 버튼-->
          <footer>
            <div class="btn">
              <img class="btnleft" src="images/left.png">
              <img class="btnright" src="images/right.png">
            </div>
          </footer>
        </div>
      </div>
      <script>
        //뒤로가기 막기
        history.pushState(null, null, location.href);
        window.onpopstate = function () {
          history.go(1);
        };
      </script>
  
  </body>
<script>
   new Vue({
          el : "#rankingList",
          data : {
             rankings: null
          },
          created() {
            axios.get('http://127.0.0.1:80/rankings')
                .then(response => {
                   this.rankings = response.data;
                   console.log(this.rankings);
               })
               .catch(error => console.log(error));
          }
  });
  </script>
</html>
